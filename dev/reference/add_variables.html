<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add variables to a workflow — add_variables • workflows</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>
<link href="../tidyverse-2.css" rel="stylesheet">

<!--optional theme-->
<link href="../tidymodels.css" rel="stylesheet">




<meta property="og:title" content="Add variables to a workflow — add_variables" />
<meta property="og:description" content="

add_variables() specifies the terms of the model through the usage of
tidyselect::select_helpers for the outcomes and predictors.
remove_variables() removes the variables. Additionally, if the model
has already been fit, then the fit is removed.
update_variables() first removes the variables, then replaces the
previous variables with the new ones. Any model that has already been
fit based on the original variables will need to be refit.
workflow_variables() bundles outcomes and predictors into a single
variables object, which can be supplied to add_variables().

" />
<meta property="og:image" content="https://workflows.tidymodels.org/logo.png" />
<meta name="twitter:card" content="summary" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">workflows</a>
        <div class="info hidden-xs hidden-sm">
          <span class="partof">part of <a href="https://tidymodels.org">tidymodels</a></span>
          <span class="version version-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.2.4.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../articles/stages.html">Workflow Stages</a>
</li>
<li>
  <a href="../articles/extras/getting-started.html">Getting Started</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
        <li>
  <a href="https://github.com/tidymodels/workflows/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add variables to a workflow</h1>
    <small class="dont-index">Source: <a href='https://github.com/tidymodels/workflows/blob/master/R/pre-action-variables.R'><code>R/pre-action-variables.R</code></a></small>
    <div class="hidden name"><code>add_variables.Rd</code></div>
    </div>

    <div class="ref-description">
    
<ul>
<li><p><code>add_variables()</code> specifies the terms of the model through the usage of
<a href='https://tidyselect.r-lib.org/reference/language.html'>tidyselect::select_helpers</a> for the <code>outcomes</code> and <code>predictors</code>.</p></li>
<li><p><code>remove_variables()</code> removes the variables. Additionally, if the model
has already been fit, then the fit is removed.</p></li>
<li><p><code>update_variables()</code> first removes the variables, then replaces the
previous variables with the new ones. Any model that has already been
fit based on the original variables will need to be refit.</p></li>
<li><p><code>workflow_variables()</code> bundles <code>outcomes</code> and <code>predictors</code> into a single
variables object, which can be supplied to <code>add_variables()</code>.</p></li>
</ul>

    </div>

    <pre class="usage"><span class='fu'>add_variables</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>outcomes</span>, <span class='va'>predictors</span>, <span class='va'>...</span>, blueprint <span class='op'>=</span> <span class='cn'>NULL</span>, variables <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='fu'>remove_variables</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='fu'>update_variables</span><span class='op'>(</span>
  <span class='va'>x</span>,
  <span class='va'>outcomes</span>,
  <span class='va'>predictors</span>,
  <span class='va'>...</span>,
  blueprint <span class='op'>=</span> <span class='cn'>NULL</span>,
  variables <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span>

<span class='fu'>workflow_variables</span><span class='op'>(</span><span class='va'>outcomes</span>, <span class='va'>predictors</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A workflow</p></td>
    </tr>
    <tr>
      <th>outcomes, predictors</th>
      <td><p>Tidyselect expressions specifying the terms
of the model. <code>outcomes</code> is evaluated first, and then all outcome columns
are removed from the data before <code>predictors</code> is evaluated.
See <a href='https://tidyselect.r-lib.org/reference/language.html'>tidyselect::select_helpers</a> for the full range of possible ways to
specify terms.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Not used.</p></td>
    </tr>
    <tr>
      <th>blueprint</th>
      <td><p>A hardhat blueprint used for fine tuning the preprocessing.</p>
<p>If <code>NULL</code>, <code><a href='https://rdrr.io/pkg/hardhat/man/default_xy_blueprint.html'>hardhat::default_xy_blueprint()</a></code> is used.</p>
<p>Note that preprocessing done here is separate from preprocessing that
might be done by the underlying model.</p></td>
    </tr>
    <tr>
      <th>variables</th>
      <td><p>An alternative specification of <code>outcomes</code> and <code>predictors</code>,
useful for supplying variables programmatically.</p><ul>
<li><p>If <code>NULL</code>, this argument is unused, and <code>outcomes</code> and <code>predictors</code> are
used to specify the variables.</p></li>
<li><p>Otherwise, this must be the result of calling <code>workflow_variables()</code> to
create a standalone variables object. In this case, <code>outcomes</code> and
<code>predictors</code> are completely ignored.</p></li>
</ul></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    
<ul>
<li><p><code>add_variables()</code> returns <code>x</code> with a new variables preprocessor.</p></li>
<li><p><code>remove_variables()</code> returns <code>x</code> after resetting any model fit and
removing the variables preprocessor.</p></li>
<li><p><code>update_variables()</code> returns <code>x</code> after removing the variables preprocessor,
and then re-specifying it with new variables.</p></li>
<li><p><code>workflow_variables()</code> returns a 'workflow_variables' object containing
both the <code>outcomes</code> and <code>predictors</code>.</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>To fit a workflow, exactly one of <code><a href='add_formula.html'>add_formula()</a></code>, <code><a href='add_recipe.html'>add_recipe()</a></code>, or
<code>add_variables()</code> <em>must</em> be specified.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://parsnip.tidymodels.org'>parsnip</a></span><span class='op'>)</span>

<span class='va'>spec_lm</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://parsnip.tidymodels.org/reference/linear_reg.html'>linear_reg</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>spec_lm</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://parsnip.tidymodels.org/reference/set_engine.html'>set_engine</a></span><span class='op'>(</span><span class='va'>spec_lm</span>, <span class='st'>"lm"</span><span class='op'>)</span>

<span class='va'>workflow</span> <span class='op'>&lt;-</span> <span class='fu'><a href='workflow.html'>workflow</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>workflow</span> <span class='op'>&lt;-</span> <span class='fu'><a href='add_model.html'>add_model</a></span><span class='op'>(</span><span class='va'>workflow</span>, <span class='va'>spec_lm</span><span class='op'>)</span>

<span class='co'># Add terms with tidyselect expressions.</span>
<span class='co'># Outcomes are specified before predictors.</span>
<span class='va'>workflow1</span> <span class='op'>&lt;-</span> <span class='fu'>add_variables</span><span class='op'>(</span>
  <span class='va'>workflow</span>,
  outcomes <span class='op'>=</span> <span class='va'>mpg</span>,
  predictors <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>cyl</span>, <span class='va'>disp</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='va'>workflow1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://generics.r-lib.org/reference/fit.html'>fit</a></span><span class='op'>(</span><span class='va'>workflow1</span>, <span class='va'>mtcars</span><span class='op'>)</span>
<span class='va'>workflow1</span>
</div><div class='output co'>#&gt; ══ Workflow [trained] ══════════════════════════════════════════════════════════
#&gt; <span style='font-style: italic;'>Preprocessor:</span> Variables
#&gt; <span style='font-style: italic;'>Model:</span> linear_reg()
#&gt; 
#&gt; ── Preprocessor ────────────────────────────────────────────────────────────────
#&gt; Outcomes: mpg
#&gt; Predictors: c(cyl, disp)
#&gt; 
#&gt; ── Model ───────────────────────────────────────────────────────────────────────
#&gt; 
#&gt; Call:
#&gt; stats::lm(formula = ..y ~ ., data = data)
#&gt; 
#&gt; Coefficients:
#&gt; (Intercept)          cyl         disp  
#&gt;    34.66099     -1.58728     -0.02058  
#&gt; </div><div class='input'>
<span class='co'># Removing the variables of a fit workflow will also remove the model</span>
<span class='fu'>remove_variables</span><span class='op'>(</span><span class='va'>workflow1</span><span class='op'>)</span>
</div><div class='output co'>#&gt; ══ Workflow ════════════════════════════════════════════════════════════════════
#&gt; <span style='font-style: italic;'>Preprocessor:</span> None
#&gt; <span style='font-style: italic;'>Model:</span> linear_reg()
#&gt; 
#&gt; ── Model ───────────────────────────────────────────────────────────────────────
#&gt; Linear Regression Model Specification (regression)
#&gt; 
#&gt; Computational engine: lm 
#&gt; </div><div class='input'>
<span class='co'># Variables can also be updated</span>
<span class='fu'>update_variables</span><span class='op'>(</span><span class='va'>workflow1</span>, <span class='va'>mpg</span>, <span class='fu'>starts_with</span><span class='op'>(</span><span class='st'>"d"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; ══ Workflow ════════════════════════════════════════════════════════════════════
#&gt; <span style='font-style: italic;'>Preprocessor:</span> Variables
#&gt; <span style='font-style: italic;'>Model:</span> linear_reg()
#&gt; 
#&gt; ── Preprocessor ────────────────────────────────────────────────────────────────
#&gt; Outcomes: mpg
#&gt; Predictors: starts_with("d")
#&gt; 
#&gt; ── Model ───────────────────────────────────────────────────────────────────────
#&gt; Linear Regression Model Specification (regression)
#&gt; 
#&gt; Computational engine: lm 
#&gt; </div><div class='input'>
<span class='co'># The `outcomes` are removed before the `predictors` expression</span>
<span class='co'># is evaluated. This allows you to easily specify the predictors</span>
<span class='co'># as "everything except the outcomes".</span>
<span class='va'>workflow2</span> <span class='op'>&lt;-</span> <span class='fu'>add_variables</span><span class='op'>(</span><span class='va'>workflow</span>, <span class='va'>mpg</span>, <span class='fu'>everything</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>workflow2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://generics.r-lib.org/reference/fit.html'>fit</a></span><span class='op'>(</span><span class='va'>workflow2</span>, <span class='va'>mtcars</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/hardhat/man/hardhat-extract.html'>extract_mold</a></span><span class='op'>(</span><span class='va'>workflow2</span><span class='op'>)</span><span class='op'>$</span><span class='va'>predictors</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 32 × 10</span>
#&gt;      cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
#&gt;    <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>
#&gt; <span style='color: #BCBCBC;'> 1</span>     6  160    110  3.9   2.62  16.5     0     1     4     4
#&gt; <span style='color: #BCBCBC;'> 2</span>     6  160    110  3.9   2.88  17.0     0     1     4     4
#&gt; <span style='color: #BCBCBC;'> 3</span>     4  108     93  3.85  2.32  18.6     1     1     4     1
#&gt; <span style='color: #BCBCBC;'> 4</span>     6  258    110  3.08  3.22  19.4     1     0     3     1
#&gt; <span style='color: #BCBCBC;'> 5</span>     8  360    175  3.15  3.44  17.0     0     0     3     2
#&gt; <span style='color: #BCBCBC;'> 6</span>     6  225    105  2.76  3.46  20.2     1     0     3     1
#&gt; <span style='color: #BCBCBC;'> 7</span>     8  360    245  3.21  3.57  15.8     0     0     3     4
#&gt; <span style='color: #BCBCBC;'> 8</span>     4  147.    62  3.69  3.19  20       1     0     4     2
#&gt; <span style='color: #BCBCBC;'> 9</span>     4  141.    95  3.92  3.15  22.9     1     0     4     2
#&gt; <span style='color: #BCBCBC;'>10</span>     6  168.   123  3.92  3.44  18.3     1     0     4     4
#&gt; <span style='color: #949494;'># … with 22 more rows</span></div><div class='input'>
<span class='co'># Variables can also be added from the result of a call to</span>
<span class='co'># `workflow_variables()`, which creates a standalone variables object</span>
<span class='va'>variables</span> <span class='op'>&lt;-</span> <span class='fu'>workflow_variables</span><span class='op'>(</span><span class='va'>mpg</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>cyl</span>, <span class='va'>disp</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>workflow3</span> <span class='op'>&lt;-</span> <span class='fu'>add_variables</span><span class='op'>(</span><span class='va'>workflow</span>, variables <span class='op'>=</span> <span class='va'>variables</span><span class='op'>)</span>
<span class='fu'><a href='https://generics.r-lib.org/reference/fit.html'>fit</a></span><span class='op'>(</span><span class='va'>workflow3</span>, <span class='va'>mtcars</span><span class='op'>)</span>
</div><div class='output co'>#&gt; ══ Workflow [trained] ══════════════════════════════════════════════════════════
#&gt; <span style='font-style: italic;'>Preprocessor:</span> Variables
#&gt; <span style='font-style: italic;'>Model:</span> linear_reg()
#&gt; 
#&gt; ── Preprocessor ────────────────────────────────────────────────────────────────
#&gt; Outcomes: mpg
#&gt; Predictors: c(cyl, disp)
#&gt; 
#&gt; ── Model ───────────────────────────────────────────────────────────────────────
#&gt; 
#&gt; Call:
#&gt; stats::lm(formula = ..y ~ ., data = data)
#&gt; 
#&gt; Coefficients:
#&gt; (Intercept)          cyl         disp  
#&gt;    34.66099     -1.58728     -0.02058  
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="tidyverse">
  <p><code>workflows</code> is a part of the <strong>tidymodels</strong> ecosystem, a collection of modeling packages designed with common APIs and a shared philosophy.</p>
</div>

<div class="author">
  <p>
    Developed by Davis Vaughan.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
   </div>

  


  </body>
</html>


